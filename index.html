<html>
    <head>
        <title>
            dosing
        </title>
        <link rel="stylesheet" href="./dosing.css" />
        <meta charset="utf-8">
        <meta name="viewport" 
          content="width=device-width, height=device-height, 
                     minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0">

    </head>
    <body>
  
        <div class="header">
            dosage calculator
        </div>
        <div class="flex-box">
            <div id="tank-preview">
                <div class="tank-container">
                    <div class="tank">
                        <div class="face" id="front"><b style="color:whitesmoke;">씨알이</b></div>
                        <div class="face" id="back"></div>
                        <div class="face" id="left"></div>
                        <div class="face" id="right"></div>
                        <div class="face" id="top"></div>
                        <div class="face" id="bottom"></div>
                    </div>
                </div>
                <div id="tanksize">
                    <input class="tanksize-input" id="tank-width" type="input" placeholder="width"/><span>cm</span>
                    <input class="tanksize-input" id="tank-depth" type="input" placeholder="depth"/><span>cm</span>
                    <input class="tanksize-input" id="tank-height" type="input" placeholder="height"/><span>cm</span>
                
                <div id="detailed" display="none">
                    <input class="tanksize-input" id="tank-wieght" type="input" placeholder="유리두께"/><span>T &nbsp;&nbsp;</span>
                    <input class="tanksize-input" id="tank-sand" type="input" placeholder="바닥재"/><span>cm</span>
                    <input class="tanksize-input" id="water-level" type="input" placeholder="수위"/><span>cm</span>
                </div>
            </div>
                <div style="display:flex;justify-content: flex-end;width:100%">
                    <span style="margin:0 10px;line-height: 30px;vertical-align: middle;font-size:1.3rem;color:#7d7d7d">상세 설정</span>
                    <label class="switch-button"> <input type="checkbox" id="checkbox"/> <span class="onoff-switch"></span> </label>
                </div>
                <input type="button" value="계산" onclick="calc()" style="width:100%;height:30px;border: none; background-color:rgb(125, 125, 125);color:whitesmoke"/>

                <div id="calc-capacity">
                    내 수조의 용량을 계산해보세요.
                </div>
                <div class="flex-box" id="search-container">
                    대충 검색창 위치
                    <div class="search-list">
                        <img src="./neoc.png" style="height:100px;">
                        <div>
                        <p style="font-weight:bold;font-size:1.1rem">네오 C</p>
                        권장 사용량 : 40L 당 10cc<br>
                        내 어항 사용량 : 25cc 권장<br>
                        <a href="http://aquarioshop.co.kr/data/editor/goods/d5658512ff7f0340.jpg">상세 설명서 보기</a>
                        </div>
                    </div>
                    <div class="search-list">
                        <img src="./flourishExel.png" style="height:100px;">
                        <div>
                        <p style="font-weight:bold;font-size:1.1rem">네오 C</p>
                        권장 사용량 : 40L 당 10cc<br>
                        내 어항 사용량 : 25cc 권장<br>
                        <a href="http://aquarioshop.co.kr/data/editor/goods/d5658512ff7f0340.jpg">상세 설명서 보기</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            function calc(){
                var s = 100;
                var tankWidth = document.getElementById("tank-width").value ;
                var tankHeight = document.getElementById("tank-height").value ; 
                var tankDepth = document.getElementById("tank-depth").value;
                var tankSand = document.getElementById("tank-sand").value;
                var waterLevel = document.getElementById("water-level").value;
                var tankWeight = document.getElementById("tank-wieght").value;
                var tankWidth2 = tankWidth;
                var tankHeight2 = tankHeight;
                var tankDepth2 = tankDepth;
                var tankSand2 = tankSand;
                var waterLevel2 = waterLevel;
                var min = Math.min(tankWidth,tankDepth,tankHeight)
                tankWidth = (tankWidth/min)*s;
                tankHeight = (tankHeight/min)*s;
                tankDepth = (tankDepth/min)*s;
                tankSand = (tankSand/min)*s;
                waterLevel = (waterLevel/min)*s
                if(Math.max(tankWidth,tankDepth,tankHeight)>200){
                    var scale = 200/Math.max(tankWidth,tankDepth,tankHeight);
                    tankWidth *= scale;
                    tankDepth *= scale;
                    tankHeight *= scale;
                    tankSand *= scale;
                    waterLevel *= scale;
                }
                // console.log(tankWidth,tankDepth,tankHeight);
                // if (max(tankWidth,tankDepth,tankHeight)< )
                // tankWidth *= s;
                // tankHeight *= s;
                // tankDepth *= s;
                // tankSand *= s;
                // waterLevel *= s;
                
                // alert(tankWidth*tankHeight*tankDepth);
                
                var front = document.getElementById("front");
                var back = document.getElementById("back");
                var left = document.getElementById("left");
                var right = document.getElementById("right");
                var top = document.getElementById("top");
                var bottom = document.getElementById("bottom");
                var checkbox = document.getElementById("checkbox");
                var tankArr = [front,back,left,right,top,bottom]
                for (const key in tankArr){
                    tankArr[key].innerHTML = "";
                }
                if (tankSand != ""){
                    
                    // console.log(tankArr);
                    var sand =`<div style='width:100%; height:${tankSand}px;position:absolute;bottom:0;background-color:rgba(150, 96, 29, 0.714);margin:0px'></div>`;
                    front.innerHTML = sand;

                    left.innerHTML = sand;
                    right.innerHTML=sand;
                    back.innerHTML = `<div style='width:100%; height:${tankSand}px;position:absolute;top:0;background-color:rgba(150, 96, 29, 0.714);margin:0px'></div>`;
                    // bottom.innerHTML = `<div style='width:100%; height:100% background-color:rgba(150, 96, 29, 0.714);position:absolute; bottom:${tankSand}'></div>`;
                    
                }
                if (waterLevel != ""){
                    // var tankArr = document.querySelectorAll('.tank > div');
                    // console.log(tankArr);
                    var sand =`<div style='width:100%; height:${waterLevel}px;position:absolute;top:0;background-color:rgba(255, 255, 255, 0.714);margin:0px'></div>`;
                    front.innerHTML += sand;
                    left.innerHTML += sand;
                    right.innerHTML += sand;
                    back.innerHTML += `<div style='width:100%; height:${waterLevel}px;position:absolute;bottom:0;background-color:rgba(255, 255, 255, 0.714);margin:0px'></div>`;
                    // bottom.innerHTML = `<div style='width:100%; height:100% background-color:rgba(150, 96, 29, 0.714);position:absolute; bottom:${tankSand}'></div>`;
                    
                }

                front.style.width = tankWidth + 'px';
                front.style.height = tankHeight + 'px';
                front.style.transform = '';
                front.style.transform = 'translateZ(' + (tankDepth/2) +'px)';
                back.style.width = tankWidth + 'px';
                back.style.transform = 'rotate(-180deg) translateZ(' + -(tankDepth/2) +'px)';
                back.style.height = tankHeight + 'px';
                left.style.width = tankDepth + 'px';
                left.style.transform = 'translateX(' + -((tankDepth/2)) +'px) rotateY(90deg)';
                // left.setAttribute("transform",`translateX(-${tankDepth}px) rotateY(190deg)`);
                left.style.height = tankHeight + 'px';
                right.style.width = tankDepth + 'px';
                right.style.height = tankHeight + 'px';
                right.style.transform = 'translateX(' +  (tankWidth - tankDepth + tankDepth/2) +'px) rotateY(90deg)';
                top.style.width = tankWidth + 'px';
                top.style.height = tankDepth + 'px';
                top.style.transform = 'translateY(' + -(tankDepth/2) + 'px) rotateX(90deg)';
                bottom.style.width = tankWidth + 'px';
                bottom.style.height = tankDepth + 'px';
                bottom.style.transform = 'translateY(' + (tankHeight - tankDepth + tankDepth/2) + 'px) rotateX(90deg)';

                var containerWidth = document.querySelector('.tank-container').clientWidth;
                var containerHeight = document.querySelector('.tank-container').clientHeight;
                var face = document.querySelectorAll('.face');

                // alert();

                face.forEach(
                    (el) =>{
                        if(tankWidth>tankDepth){
                            el.style.left = (containerWidth/2) - (front.clientWidth/2);
                        }
                        else if(tankWidth<tankDepth){
                            el.style.left = (containerWidth - Math.min(front.clientWidth,right.clientWidth))/2;
                        }
                        el.style.top = (containerHeight -front.clientHeight)/2;
                    }
                    
                    );
                let mytank = tankWidth2 * tankDepth2 * tankHeight2/1000;
                var capacity = document.getElementById('calc-capacity') ;
                if (checkbox.checked){
                    var x = (((tankWidth2*10 * tankHeight2 * 10 * tankWeight * 2.5) /1000000) * 2);
                    var y = (((tankHeight2*10 * ((tankDepth2 * 10)-tankWeight*2) * tankWeight * 2.5) /1000000) * 2);
                    var z = ((((tankWidth2*10) - tankWeight*2) * ((tankDepth2 * 10)-tankWeight*2) * tankWeight * 2.5) /1000000);
                    var sum = x+y+z;

                    tankWidth2 -= tankWeight / 5;
                    tankDepth2 -= tankWeight / 5;
                    mytank = tankWidth2 * tankDepth2 * (tankHeight2-tankSand2-waterLevel2-tankWeight/10)/1000;
                    capacity.innerHTML = `수조의 물 용량은 약 <b>${mytank.toFixed(2)}L</b><br>`
                    capacity.innerHTML += `어항의 무게는 약 <b>${sum.toFixed(2)}kg</b>`;
                }else{
                    capacity.innerHTML = `수조의 물 용량은 약 <b>${mytank.toFixed(2)}L</b>`
                }

                
                
                
                
            }
            
            checkbox.addEventListener('change', function() {
                var detail = document.getElementById('detailed');
                if(this.checked){
                    
                    detail.style.display="block";
                }else{
                    detail.style.display="none";
                }
            })
        </script>
    </body>
</html>
